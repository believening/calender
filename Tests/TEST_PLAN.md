# MultiCalendarApp 用户测试方案

## 📋 测试概述

本测试方案帮助您验证 MultiCalendarApp 的核心功能和用户体验。测试分为以下几部分：
1. **手动功能测试** - 在设备上进行的功能验证
2. **自动化测试** - 通过脚本运行的验证
3. **边界条件测试** - 特殊情况的验证

---

## 🛠️ 测试环境准备

### 方式一：Python 测试脚本（推荐）

**适用于**：没有 Mac/Xcode 的用户，快速验证核心算法

```bash
# 进入项目目录
cd projects/MultiCalendarApp/Tests

# 运行测试脚本
python3 run_tests.py
```

**预期结果**：
- 所有 15 项测试通过
- 通过率 100%
- 显示详细的转换结果

### 方式二：Xcode 单元测试

**适用于**：Mac 用户，完整测试 iOS 应用

1. 用 Xcode 打开项目
2. 选择 `MultiCalendarAppTests` target
3. 按 `Cmd + U` 运行测试
4. 查看测试报告

### 方式三：模拟器/UI 测试

1. 在 Xcode 中运行应用 (`Cmd + R`)
2. 按照下面的测试用例手动操作

---

## ✅ 功能测试用例

### 1. 农历显示测试

| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 农历日期显示 | 打开日历，查看任意日期 | 显示农历月份和日期（如：正月、初一） |
| 生肖显示 | 查看2024年1月1日 | 显示"龙"年 |
| 天干地支 | 查看2024年任意日期 | 显示"甲辰年" |
| 闰月处理 | 查看有闰月的年份 | 正确显示闰月标识 |

**测试数据参考**：
```
2024年1月1日 → 甲辰年 正月 初一 (龙)
2025年1月1日 → 乙巳年 正月 初一 (蛇)
2026年2月26日 → 丙午年 二月 廿六 (马)
```

### 2. 藏历显示测试

| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 藏历日期显示 | 启用藏历，查看日期 | 显示藏历月份 |
| 藏历新年 | 查看2026年藏历正月 | 显示"藏历新年 (ལོ་གསར)" |
| 殊胜日标记 | 查看初一、初八、十五等 | 显示殊胜日标识 |
| 五行生肖 | 查看藏历年份 | 显示"火马年"等 |

**测试数据参考**：
```
2026年 → 火马年
2024年 → 木龙年
藏历殊胜日：初一、初八、初十、十五、十八、廿五、三十
```

### 3. 节日功能测试

| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 农历节日 | 查看农历正月 | 显示春节、元宵节 |
| 藏历节日 | 查看藏历正月 | 显示藏历新年、酥油花灯节 |
| 节日详情 | 点击节日 | 显示节日描述和藏文名称 |
| 节日提醒 | 设置提醒 | 在节日当天收到通知 |

**农历节日列表**：
- 春节（正月初一）
- 元宵节（正月十五）
- 端午节（五月初五）
- 中秋节（八月十五）
- 重阳节（九月初九）
- 腊八节（腊月初八）
- 除夕（腊月三十）

**藏历节日列表**：
- 藏历新年（ལོ་གསར）- 正月初一
- 酥油花灯节（ཆོས་འཁོར་དུས་ཆེན）- 正月十五
- 萨迦达瓦（ས་ག་ཟླ་བ）- 四月十五
- 雪顿节（ཞོ་སྟོན）- 六月三十
- 佛陀天降日（ལྷ་བབས་དུས་ཆེན）- 九月二十二

### 4. 年份跳转测试（核心痛点）

| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 年份选择器 | 点击年月标题 | 弹出年份选择器 |
| 快速跳转1900 | 选择1900年1月 | 正确显示1900年日历 |
| 快速跳转2050 | 选择2050年12月 | 正确显示2050年日历 |
| 跨世纪跳转 | 从2000跳转到2100 | 无延迟，立即显示 |

**测试步骤**：
1. 点击顶部年月标题
2. 在年份选择器中选择目标年份
3. 选择月份
4. 点击确定
5. 验证日历正确显示目标年月

### 5. 提醒功能测试

| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 初一提醒设置 | 设置→初一提醒→启用 | 保存设置 |
| 十五提醒设置 | 设置→十五提醒→启用 | 保存设置 |
| 提前提醒 | 设置提前1天 | 在节日前一天收到提醒 |
| 提醒时间 | 设置08:00 | 在指定时间收到提醒 |

**默认提醒规则**：
```
初一提醒：当天 09:00
十五提醒：当天 09:00
佛教节日：提前1天 08:00
传统节日：当天 09:00
藏历节日：提前1天 08:00
```

### 6. UI/UX 测试

| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 月份切换 | 点击左右箭头 | 平滑切换月份 |
| 今天按钮 | 点击"今天" | 返回当前月份，选中今天 |
| 农历开关 | 点击月亮图标 | 显示/隐藏农历 |
| 藏历开关 | 点击火焰图标 | 显示/隐藏藏历 |
| 节日卡片 | 滚动节日列表 | 显示本月所有节日 |

---

## 🔍 边界条件测试

### 日期边界

| 测试用例 | 输入 | 预期结果 |
|----------|------|----------|
| 最小年份 | 1900年1月1日 | 正确显示农历 |
| 最大年份 | 2100年12月31日 | 正确显示农历 |
| 跨年处理 | 12月31日→1月1日 | 正确切换年份 |
| 闰年2月 | 2024年2月29日 | 正确处理闰日 |

### 数据边界

| 测试用例 | 预期结果 |
|----------|----------|
| 天干数量 | 10个（甲乙丙丁戊己庚辛壬癸） |
| 地支数量 | 12个（子丑寅卯辰巳午未申酉戌亥） |
| 生肖数量 | 12个 |
| 农历月份 | 12个（正月~腊月） |
| 农历日期 | 30个（初一~三十） |

---

## 📊 性能测试

### 转换性能

```bash
# 运行性能测试
python3 run_tests.py
```

**性能指标**：
- 1000次转换应 < 1秒
- 平均每次转换 < 1毫秒

### UI 流畅度

| 测试项 | 操作 | 预期 |
|--------|------|------|
| 月份切换 | 快速连续点击 | 无卡顿 |
| 年份跳转 | 跨世纪跳转 | 立即响应 |
| 节日加载 | 节日较多的月份 | 列表滚动流畅 |

---

## 🧪 自动化测试脚本使用

### 完整测试

```bash
cd projects/MultiCalendarApp/Tests
python3 run_tests.py
```

### 只测试农历功能

修改 `run_tests.py`，只运行农历相关测试：

```python
# 在 TestSuite.run_all_tests() 中注释掉其他测试
self.run_test("农历插件信息", self.test_lunar_plugin_info)
self.run_test("公历转农历", self.test_solar_to_lunar_conversion)
self.run_test("农历节日查询", self.test_lunar_festivals)
```

### 只测试藏历功能

```python
self.run_test("藏历插件信息", self.test_tibetan_plugin_info)
self.run_test("公历转藏历", self.test_solar_to_tibetan_conversion)
self.run_test("藏历节日查询", self.test_tibetan_festivals)
```

---

## 📝 测试报告模板

完成测试后，请填写以下报告：

```
## MultiCalendarApp 测试报告

测试人员：__________
测试日期：__________
测试环境：□ iOS模拟器 □ 真机 □ Python脚本

### 功能测试结果

| 功能模块 | 通过/失败 | 备注 |
|----------|-----------|------|
| 农历显示 | □ 通过 □ 失败 | |
| 藏历显示 | □ 通过 □ 失败 | |
| 节日查询 | □ 通过 □ 失败 | |
| 年份跳转 | □ 通过 □ 失败 | |
| 提醒功能 | □ 通过 □ 失败 | |
| UI交互 | □ 通过 □ 失败 | |

### 发现的问题

1. ________________________________
2. ________________________________
3. ________________________________

### 建议

________________________________
```

---

## ❓ 常见问题

### Q: Python 测试脚本报错怎么办？

A: 确保使用 Python 3.6+：
```bash
python3 --version
# 应显示 Python 3.6 或更高版本
```

### Q: 如何验证生肖计算是否正确？

A: 对照以下数据：
- 1984年 → 鼠（甲子年）
- 2000年 → 龙（庚辰年）
- 2024年 → 龙（甲辰年）
- 2026年 → 马（丙午年）

### Q: 藏历和农历有什么区别？

A: 
- **农历**：中国传统历法，以月相变化为准
- **藏历**：藏族历法，与农历相似但有差异，有"缺日"和"重日"概念

### Q: 殊胜日是什么？

A: 藏传佛教中，初一、初八、初十、十五、十八、廿五、三十是殊胜日，认为在这些日子行善功德倍增。

---

## 📚 参考资料

- [中国农历算法](https://github.com/isee15/Lunar-Solar-Calendar-Converter)
- [藏历算法](https://github.com/tibetan-calendar)
- [Apple SwiftUI 教程](https://developer.apple.com/tutorials/swiftui)

---

**测试愉快！如有问题，请联系开发团队。** 🦞
